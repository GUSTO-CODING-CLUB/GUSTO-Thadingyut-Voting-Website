<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>GUSTO Thadingyut Voting</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/7.0.1/css/all.min.css" />
  <link rel="icon" type="image/png" href="{{ url_for('serve_image', filename='favicon.png') }}" />

  <style>
    /* Professional Smooth Navigation Indicator */
    #nav-indicator{
      position:absolute; border-radius:.75rem; background:#015486;
      box-shadow:0 4px 12px rgba(1, 84, 134, 0.3);
      transition:all 0.6s cubic-bezier(0.4, 0, 0.2, 1);
      opacity:0; pointer-events:none;
      transform-origin: center;
    }
    /* Keep links above the pill */
    .nav-a{
      position:relative;
      z-index:10;
      transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    }
    .nav-a:hover { transform: translateY(-1px); }

    /* Desktop-only: active link becomes white */
    @media (min-width:768px){
      .nav-a.is-active, .nav-a.is-active * { color:#fff !important; }
    }
    /* Mobile: keep active link dark on white background */
    @media (max-width:767px){
      .nav-a.is-active, .nav-a.is-active * { color:#111827 !important; }
    }

    @keyframes diya-glow {
      0%   { filter: brightness(1) drop-shadow(0 0 0px #FFD700); }
      40%  { filter: brightness(1.3) drop-shadow(0 0 16px #FFD700); }
      60%  { filter: brightness(1.1) drop-shadow(0 0 8px #FFD700); }
      100% { filter: brightness(1) drop-shadow(0 0 0px #FFD700); }
    }
    .animate-diya-glow { animation: diya-glow 2s infinite; }
  </style>

<style id="stack-css">
/* Scroll container (under the 72px sticky navbar) */
.scroll-stack-scroller{
  position: relative;
  height: calc(100vh - 72px);
  overflow-y: auto;
  overflow-x: hidden;
  -webkit-overflow-scrolling: touch;
  scroll-behavior: smooth;
  background: transparent;
}

/* Give room above/below so the card peeks nicely */
.scroll-stack-inner{
  padding: 4vh 1rem 2vh;
  min-height: 0;
}

/* Card look (GUSTO colors ok) */
.scroll-stack-card{
  position: relative;
  width: min(1200px, 98vw);
  margin: 3vh auto;                  /* reduced space between cards */
  border-radius: 32px;
  padding: clamp(24px, 4vw, 48px);
  color: #fff;
  background: none;
  overflow: hidden;
}

.scroll-stack-card video.bg-hero {
  position: absolute;
  top: 0; left: 0; width: 100%; height: 100%; object-fit: cover;
  z-index: 0;
  border-radius: 32px;
  opacity: 1;
  filter: blur(8px) brightness(1.1);
  pointer-events: none;
}
.scroll-stack-card > *:not(video) {
  position: relative;
  z-index: 1;
}
  box-shadow: 0 18px 40px rgba(3,37,76,.18);
  will-change: transform,opacity;
  transform: translateY(50px) scale(.98); /* default: hidden-ish */
  opacity: 0;
  transition: transform .5s cubic-bezier(.22,.61,.36,1), opacity .5s ease;
}

/* Image style inside card */
.scroll-stack-card img{
  width: 140px;
  border-radius: 12px;
  border: 2px solid rgba(255,255,255,.3);
}

/* States controlled by JS */
.scroll-stack-card.is-current{ transform: translateY(0) scale(1); opacity: 1; z-index: 10; }
.scroll-stack-card.is-next   { transform: translateY(24px) scale(.985); opacity: .85; z-index: 5; }
.scroll-stack-card.is-past   { transform: translateY(-16px) scale(.94); opacity: .45; z-index: 1; }

/* Make sure text is readable even if a Tailwind class tries to darken it */
.scroll-stack-card h2, .scroll-stack-card p{ color: rgba(255,255,255,.95); }
</style>

</head>

<body class="flex flex-col min-h-screen bg-white text-gray-800">
  <!-- Navbar -->
  <nav class="bg-white shadow sticky top-0 z-50">
    <div class="flex items-center justify-between px-6 h-[72px]">
      <!-- Logo -->
      <div class="flex items-center space-x-2">
        <a href="{{ url_for('home') }}" class="flex items-center">
          <img src="img/Gusto_Nav_Logo.png" alt="GUSTO Logo" class="h-[70px] w-auto -my-4 rounded-full" />
        </a>
        <div class="flex flex-col md:flex-row items-center">
          <span class="font-extrabold lg:text-3xl font-[Merriweather,serif]">GUSTO</span>
          <span class="ml-1 font-normal font-[Noto_Sans_Myanmar] whitespace-nowrap text-base md:text-xl max-[330px]:text-sm">
            ·Äû·ÄÆ·Äê·ÄÑ·Ä∫·Ä∏·ÄÄ·Äª·ÄΩ·Äê·Ä∫·Äï·ÄΩ·Ä≤·Äê·Ä±·Ä¨·Ä∫
          </span>
        </div>
      </div>

      <!-- Hamburger -->
      <button id="menu-btn" class="block md:hidden text-2xl p-2" aria-label="Open menu">&#9776;</button>

      <!-- Links -->
      <div id="nav-links"
           class="hidden md:flex flex-col md:flex-row items-start md:items-center
                  space-y-2 md:space-y-0 md:space-x-4 bg-white px-4 py-4 md:p-0
                  rounded-none md:rounded-full fixed md:static top-[64px] left-0
                  w-full md:w-auto z-40 shadow md:shadow-none">
        <div class="relative md:flex md:items-center">
          <span id="nav-indicator" aria-hidden="true"
                class="hidden md:block absolute top-0 left-0 rounded-xl bg-[#015486] shadow-lg"></span>

          <ul class="flex flex-col md:flex-row w-full md:w-auto space-y-2 md:space-y-0 md:space-x-2 font-medium">
            <li><a href="{{ url_for('home') }}" class="nav-a block px-3 py-2 rounded-lg text-gray-700 lg:text-2xl">Home</a></li>
            <li><a href="{{ url_for('candidates') }}" class="nav-a block px-3 py-2 rounded-lg text-gray-700 lg:text-2xl">Candidate</a></li>
            <li><a href="{{ url_for('lantern') }}" class="nav-a block px-3 py-2 rounded-lg text-gray-700 lg:text-2xl">Lantern</a></li>
            <li><a href="{{ url_for('results') }}" class="nav-a block px-3 py-2 rounded-lg text-gray-700 lg:text-2xl">Voting Result</a></li>
            <li><a href="{{ url_for('about') }}" class="nav-a block px-3 py-2 rounded-lg text-gray-700 lg:text-2xl">About Us</a></li>
            <li><a href="{{ url_for('final') }}" class="nav-a block px-3 py-2 rounded-lg text-gray-700 lg:text-2xl">Final</a></li>
            <li><a href="{{ url_for('winner') }}" class="nav-a block px-3 py-2 rounded-lg text-gray-700 lg:text-2xl">Winner</a></li>
            <li><a href="{{ url_for('logout') }}" class="nav-a block px-3 py-2 rounded-lg text-gray-700 lg:text-2xl">Logout</a></li>
          </ul>
        </div>
      </div>
    </div>
  </nav>

  <!-- Main -->
  <main class="bg-white">
    <div class="scroll-stack-scroller">
      <div class="scroll-stack-inner">
        {% set king_finalists = [
          { 'name': 'Bo Bo Linn', 'batch': 'HND-65', 'bio': 'Vote Me', 'img': 'Kings/Bo Bo Linn.jpg' },
          { 'name': 'Htoo Aung Linn', 'batch': 'HND-69', 'bio': '‚ú®Ready to wear the crown üëë', 'img': 'Kings/Htoo Aung Linn.png' },
          { 'name': 'Lin Latt Maung', 'batch': 'HND-52', 'bio': 'Love is crowned with cuteness üëë', 'img': 'Kings/Lin Latt Maung.png' },
          { 'name': 'Naing Aung Khant', 'batch': 'HND-59', 'bio': 'Vote Me', 'img': 'Kings/Naing Aung Khant.jpg' },
          { 'name': 'Tun Lin Aung', 'batch': 'HND-68', 'bio': 'Hated, Dated, Still Celebrated.', 'img': 'Kings/Tun Lin Aung.png' }
        ] %}
        {% set queen_finalists = [
          { 'name': 'Hnin Oo Shwe Yie', 'batch': 'Level 3 B 41', 'bio': 'Vote Me', 'img': 'Queen/Hnin Oo Shwe Yie.png' },
          { 'name': 'Hnin Thiri', 'batch': 'HND-68', 'bio': 'Taste like your sweetest dreamsüí≠ üíï', 'img': 'Queen/Hnin Thiri.png' },
          { 'name': 'May Thu Lwin', 'batch': 'HND-8 Business', 'bio': 'üíï "Brains, beauty, and a heart that shines üå∏" üíï', 'img': 'Queen/May Thu Lwin.png' },
          { 'name': 'Thanzin Cho', 'batch': 'HND-69', 'bio': 'Progress, not perfection', 'img': 'Queen/Thanzin Cho.png' },
          { 'name': 'Thet Htar Shwe Zin', 'batch': 'GUF-91', 'bio': 'A queen not only wears a crown but represents her people.', 'img': 'Queen/Thet Htar Shwe Zin.png' }
        ] %}

        {% for finalist in king_finalists %}
        <section class="scroll-stack-card p-6 md:p-10 flex flex-col md:flex-row items-center justify-between gap-6 shadow-lg">
          <video class="bg-hero" autoplay loop muted playsinline>
            <source src="img/main_page_hero.mp4" type="video/mp4" />
          </video>
          <div class="flex-1 text-center md:text-left flex flex-col justify-center">
            <h2 class="text-3xl sm:text-4xl md:text-5xl lg:text-6xl font-extrabold tracking-tight mb-2 text-yellow-300 drop-shadow">{{ finalist.name }}</h2>
            <div class="mt-4 bg-black/40 rounded-xl p-4 inline-block shadow-lg">
              <div class="text-base md:text-lg text-white mb-2">Batch: <span class="text-yellow-100">{{ finalist.batch }}</span></div>
              <div class="text-base md:text-lg italic text-white">Bio: <span class="text-yellow-100">{{ finalist.bio }}</span></div>
            </div>
          </div>
          <img class="w-1/2 md:w-1/2 h-auto rounded-2xl border-4 border-white/60 object-cover shadow-xl transition-transform duration-300 hover:scale-105 mx-0 md:mx-6" src="{{ finalist.img }}" alt="King Finalist" />
        </section>
        {% endfor %}

        {% for finalist in queen_finalists %}
        <section class="scroll-stack-card p-6 md:p-10 flex flex-col md:flex-row items-center justify-between gap-6 shadow-lg">
          <video class="bg-hero" autoplay loop muted playsinline>
            <source src="img/main_page_hero.mp4" type="video/mp4" />
          </video>
          <div class="flex-1 text-center md:text-left flex flex-col justify-center">
            <h2 class="text-3xl sm:text-4xl md:text-5xl lg:text-6xl font-extrabold tracking-tight mb-2 text-pink-300 drop-shadow">{{ finalist.name }}</h2>
            <div class="mt-4 bg-black/40 rounded-xl p-4 inline-block shadow-lg">
              <div class="text-base md:text-lg text-white mb-2">Batch: <span class="text-pink-100">{{ finalist.batch }}</span></div>
              <div class="text-base md:text-lg italic text-white">Bio: <span class="text-pink-100">{{ finalist.bio }}</span></div>
            </div>
          </div>
          <img class="w-1/2 md:w-1/2 h-auto rounded-2xl border-4 border-white/60 object-cover shadow-xl transition-transform duration-300 hover:scale-105 mx-0 md:mx-6" src="{{ finalist.img }}" alt="Queen Finalist" />
        </section>
        {% endfor %}
      </div>
    </div>
  </main>

  <!-- Footer -->
  <footer class="bg-[#03254C] py-4 px-4 md:py-5 md:px-8 h-auto md:h-[200px]">
    <div class="flex flex-col md:flex-row justify-between items-center h-full text-center">
      <div class="text-orange-400 font-medium text-base lg:text-xl mb-3 md:mb-0 ml-0 md:ml-[100px] pr-0 md:pr-4 order-1">
        ·Äï·Äª·Ä±·Ä¨·Ä∫·Äõ·ÄΩ·Äæ·ÄÑ·Ä∫·ÄÖ·Äõ·Ä¨·Äû·Äê·ÄÑ·Ä∫·Ä∏·ÄÄ·Äª·ÄΩ·Äê·Ä∫·Ä°·ÄÅ·Äª·Ä≠·Äî·Ä∫·Ä°·ÄÅ·Ä´·Äú·Ä±·Ä∏·Äñ·Äº·ÄÖ·Ä∫·Äï·Ä´·ÄÖ·Ä±
      </div>

      <div class="flex justify-center items-center py-2 order-2 flex-grow-0">
        <img src="{{ url_for('serve_image', filename='SeMeeKut.png') }}" alt="Diya" class="w-[36px] h-[36px] mx-1 md:w-[50px] md:h-[50px] animate-diya-glow" />
        <img src="{{ url_for('serve_image', filename='SeMeeKut.png') }}" alt="Diya" class="w-[50px] h-[50px] -mt-3 mx-1 md:w-[70px] md:h-[70px] md:-mt-4 animate-diya-glow" />
        <img src="{{ url_for('serve_image', filename='SeMeeKut.png') }}" alt="Diya" class="w-[36px] h-[36px] mx-1 md:w-[50px] md:h-[50px] animate-diya-glow" />
      </div>

      <div class="flex flex-col items-center md:items-end text-orange-400 font-medium text-base md:text-lg lg:text-xl mt-3 md:mt-0 mr-0 md:mr-[100px] pl-0 md:pl-4 order-3">
        <div class="flex flex-wrap justify-center md:justify-end w-[370px] lg:justify-center space-x-4 md:space-x-6 mb-1 md:mb-0 font-[fa-chevron-left]">
          <a href="{{ url_for('home') }}" class="hover:text-yellow-400">Home</a>
          <a href="{{ url_for('candidates') }}" class="hover:text-yellow-400">Candidate</a>
          <a href="{{ url_for('lantern') }}" class="hover:text-yellow-400">Lantern</a>
        </div>

        <br>

        <div class="flex flex-wrap justify-center md:justify-end space-x-4 md:space-x-6 mt-1 md:mt-1 font-[fa-chevron-left]">
          <a href="{{ url_for('results') }}" class="hover:text-yellow-400">Voting Result</a>
          <a href="{{ url_for('about') }}" class="hover:text-yellow-400">About us</a>
          <a href="{{ url_for('final') }}" class="hover:text-yellow-400">Final</a>
          <a href="{{ url_for('winner') }}" class="hover:text-yellow-400">Winner</a>
        </div>
      </div>
    </div>
  </footer>

  <!-- Mobile nav toggle -->
  <script>
    const menuBtn = document.getElementById('menu-btn');
    const navLinks = document.getElementById('nav-links');
    if (menuBtn && navLinks) menuBtn.addEventListener('click', () => navLinks.classList.toggle('hidden'));
  </script>

  <!-- Unified Navigation Script -->
  <script src="{{ url_for('static', filename='js/navigation.js') }}"></script>

<script id="stack-js">
(function(){
  const scroller = document.querySelector('.scroll-stack-scroller');
  if (!scroller) return;

  const cards  = Array.from(document.querySelectorAll('.scroll-stack-card'));
  const inner  = document.querySelector('.scroll-stack-inner');

  // Set minHeight so scrolling ends right after last card, including mobile view
  if (cards.length) {
    const lastCard = cards[cards.length-1];
    const lastCardBottom = lastCard.offsetTop + lastCard.offsetHeight;
    const scrollerHeight = scroller.clientHeight || window.innerHeight;
    // Ensure minHeight is just enough for all cards and footer, not more
    inner.style.minHeight = `${Math.max(lastCardBottom, scrollerHeight)}px`;
  }

  function clamp(v,a,b){ return v<a?a : v>b?b : v; }

  function update(){
    const vh = scroller.clientHeight || window.innerHeight;

    // Measure progress at an anchor ~30% from the top (feels like your reference)
    const anchor = scroller.scrollTop + vh * 0.30;

    // Determine "current" card (top just above the anchor)
    let current = 0;
    for (let i = 0; i < cards.length; i++){
      if (cards[i].offsetTop <= anchor) current = i; else break;
    }

    // Inter-card progress 0..1 (for cross-fade/scale between current and next)
    const curTop  = cards[current]?.offsetTop ?? 0;
    const nextTop = cards[current+1]?.offsetTop ?? (curTop + vh);
    const t = clamp((anchor - curTop) / Math.max(1, nextTop - curTop), 0, 1);

    // Apply states
    cards.forEach((card, i) => {
      card.classList.remove('is-current','is-next','is-past');
      card.style.transform = ''; // let class drive base transform
      card.style.opacity   = '';

      if (i < current){
        card.classList.add('is-past');
      } else if (i === current){
        card.classList.add('is-current');
        // ease towards the 'past' pose as we approach the next card
        card.style.transform = `translateY(${(-16*t).toFixed(1)}px) scale(${(1 - 0.06*t).toFixed(3)})`;
        card.style.opacity   = (1 - 0.55*t).toFixed(3);
      } else if (i === current + 1){
        card.classList.add('is-next');
        // ease towards the 'current' pose as we approach it
        card.style.transform = `translateY(${(24 - 24*t).toFixed(1)}px) scale(${(0.985 + 0.015*t).toFixed(3)})`;
        card.style.opacity   = (0.65 + 0.35*t).toFixed(3);
      }
      // cards beyond next remain in the default (hidden-ish) pose
    });
  }

  // rAF throttle
  let ticking = false;
  function onScroll(){
    if (ticking) return;
    ticking = true;
    requestAnimationFrame(() => { ticking = false; update(); });
  }

  scroller.addEventListener('scroll', onScroll, { passive: true });
  window.addEventListener('resize', onScroll, { passive: true });

  // Initial paint
  update();
})();
</script>

</body>
</html>
